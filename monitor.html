<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xiaomi S400 Monitor</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');</style>
</head>
<body class="bg-[#0a0a0a] text-white flex items-center justify-center h-screen font-['JetBrains_Mono'] overflow-hidden">
    <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-indigo-900/20 via-black to-black"></div>
    
    <div class="relative z-10 text-center space-y-8 p-12 border border-white/10 rounded-3xl bg-black/40 backdrop-blur-sm shadow-2xl w-full max-w-lg">
        
        <!-- Status -->
        <div class="flex items-center justify-center gap-3">
            <div id="status-dot" class="w-3 h-3 rounded-full bg-red-600 shadow-[0_0_10px_red]"></div>
            <span id="status-text" class="text-sm tracking-widest text-gray-400 uppercase">Scanning...</span>
        </div>

        <!-- Weight -->
        <div class="space-y-2">
            <h2 class="text-xs text-gray-600 uppercase tracking-[0.3em]">Live Weight</h2>
            <div class="flex items-baseline justify-center gap-2">
                <span id="weight-value" class="text-8xl font-bold text-white tracking-tighter drop-shadow-lg">0.00</span>
                <span class="text-2xl text-gray-500">kg</span>
            </div>
        </div>

        <!-- Meta -->
        <div class="grid grid-cols-2 gap-4 pt-8 border-t border-white/5 text-xs text-gray-500">
            <div class="text-left">
                <span class="block text-gray-700 mb-1">LAST UPDATE</span>
                <span id="last-update" class="text-gray-300">Waiting...</span>
            </div>
            <div class="text-right">
                <span class="block text-gray-700 mb-1">DEVICE MAC</span>
                <span class="text-gray-300">2C:19:5C:A9:C3:E8</span>
            </div>
        </div>
    </div>

    <script>
        const dot = document.getElementById('status-dot');
        const txt = document.getElementById('status-text');
        const val = document.getElementById('weight-value');
        const time = document.getElementById('last-update');

        function update() {
            fetch('/data').then(res => res.json()).then(data => {
                val.innerText = data.weight.toFixed(2);
                time.innerText = data.last_update;
                txt.innerText = data.status;

                if (data.status.toLowerCase().includes('connected')) {
                    dot.className = "w-3 h-3 rounded-full bg-green-500 shadow-[0_0_15px_#22c55e]";
                    txt.className = "text-sm tracking-widest text-green-500 uppercase";
                } else {
                    dot.className = "w-3 h-3 rounded-full bg-red-600 shadow-[0_0_10px_red]";
                    txt.className = "text-sm tracking-widest text-gray-400 uppercase";
                }
            }).catch(() => {
                txt.innerText = "OFFLINE";
                dot.className = "w-3 h-3 rounded-full bg-red-600";
            });
        }
        setInterval(update, 500);
    </script>
</body>
</html>
